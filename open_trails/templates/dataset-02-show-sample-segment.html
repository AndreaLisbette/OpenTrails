<!DOCTYPE html>
<html lang="en-us">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Code for America</title>

 	<!-- LEAFLET -->

    <!-- CODE FOR AMERICA STYLES -->
    <link rel="stylesheet" type="text/css" href="//cloud.typography.com/6435252/678502/css/fonts.css" />
    <link rel="stylesheet" href="http://style.codeforamerica.org/0/style/css/main.css">
    <link rel="stylesheet" href="http://style.codeforamerica.org/0/style/css/layout.css" media="all and (min-width: 40em)">
    <link href="http://style.codeforamerica.org/0/style/css/prism.css" rel="stylesheet" />
    <link rel="shortcut icon" href="{{ url_for('static', filename='favicon.ico') }}">
    <link rel="apple-touch-icon-precomposed" href="http://style.codeforamerica.org/0/style/favicons/60x60/flag-red.png"/>

    <!--[if lt IE 9]>
        <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!--[if (lt IE 9)&(gt IE 6)&(!IEMobile)]>
        <link rel="stylesheet" href="http://style.codeforamerica.org/0/style/css/layout.css" media="all">
    <![endif]-->

	<!-- CUSTOM STYLES -->
	<link rel="stylesheet" href="{{ url_for('static', filename='css/app.css') }}" />
    <script src="http://code.jquery.com/jquery-2.1.1.min.js"></script>
</head>

<body>
    {% include "headline.html" %}
    {% include "under-development.html" %}

<!-- Step Tracker  -->
    <ol class="steps-tracker" data-steps="4">
        <li id="step1"class="step-done icon-checkmark h6">Upload Shapefiles
        </li><!--
     --><li id="step2" class="step-active h6">Review & Convert
        </li><!--
     --><li id="step3" class="step-todo h6">Extract Named Trails</li><!--
     --><li id="step4" class="step-todo h6">Download OpenTrails</li>
    </ol>

    <div class="slab-gray">
        <section class="layout-semibreve">
            <div class="badge-heading badge-blue">
                <h3 class="badge-heading-h3-fix">Next: Convert uploaded data.</h3>
            </div>
            <form action="/datasets/{{ dataset.id }}/transform-segments" method=post>
                <p>
                    <button>Convert</button>
                </p>
            </form>
        </section>
    </div>
    <section class="layout-semibreve">
        <div class="layout-minim">
            <h4>Review your uploaded data.</h4>
            <p>You've uploaded a shapefile that contains all of the data we need to get started with the conversion. Before we move forward, review the sample data below. We've included all of the field names from the data you uploaded, and a sample value.</p>
        </div>
        <div class="layout-minim">
        <h4> Ready? Let's convert your data to OpenTrails.</h4>
            <p>You've uploaded a shapefile that contains all of the data we need to get started with the conversion. Before we move forward, review the sample data below. We've included all of the field names from the data you uploaded, and a sample value.</p>
        </div>
    </section>

    <div class="primary-content-line"></div>

    <section class="layout-semibreve">
        <table id="original-sample">
            <thead>
                <tr>
                    <th colspan="5">A Sample of Your Data</th>
                </tr>

            </thead>
            <tbody>
                <tr>
                    <td><b>Field Name</b></td>
                    <td><b>Sample Value</b></td>
                </tr>
            </tbody>
        </table>

    </section>

        <script>
            var geojson = {{ sample_segment | tojson | safe }}
            // For each property make a column
            $.each(geojson['features'][0]['properties'], function(key, property){
                $("#original-sample tbody").append("<tr>")
                $("#original-sample tbody").append("<td>"+key+"</td>")
                $("#original-sample tbody").append("<td>"+property+"</td>")
                $("#original-sample tbody").append("</tr>")
            })

            // $.each(geojson['features'][0]['properties'], function(key, property){
            //     $("#column-names").prepend("<input type='radio' name='id-column' value="+key+">"+key)
            // })
        </script>

    {% include "script-olark.html" %}
</body>
</html>
